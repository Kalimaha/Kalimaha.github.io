<html>
    <head>
      <title>How I built my blog with Grunt</title>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <meta name="format-detection" content="telephone=no">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="description" content="In the beginning it was WordPress. But then I wanted something more personal,
so I ended up building the whole blog from scratch with the help
of Grunt.">
      <meta name="robots" content="index,follow">

      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-87710589-1', 'auto');
        ga('send', 'pageview');
      </script>
      <script type="application/ld+json">
        {
          "@context":"http://schema.org",
          "@type":"BlogPosting",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html"
          },
          "headline":"How I built my blog with Grunt",
          "description":"In the beginning it was WordPress. But then I wanted something more personal,
so I ended up building the whole blog from scratch with the help
of Grunt.",
          "author": {
              "@type": "Person",
              "name": "Guido Barbaglia"
          },
          "datePublished": "2017-08-16T09:19:16.488Z",
          "dateModified": "2017-08-16T09:19:16.488Z",
          "publisher": {
            "@type": "Organization",
            "name": "Guido Barbaglia",
            "logo": {
              "@type": "ImageObject",
              "url": "http://guido-barbaglia.blog/src/images/portrait.jpg",
              "width": "150",
              "height": 60
            }
          },
          "image": {
            "@type": "ImageObject",
            "url": "http://guido-barbaglia.blog/src/images/how_i_built_my_blog_with_grunt.png",
            "height": 150,
            "width": "150"
          }
        }
      </script>

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:site" content="http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html" />
      <meta name="twitter:title" content="How I built my blog with Grunt" />
      <meta name="twitter:description" content="In the beginning it was WordPress. But then I wanted something more personal,
so I ended up building the whole blog from scratch with the help
of Grunt." />
      <meta name="twitter:image" content="http://guido-barbaglia.blog/src/images/how_i_built_my_blog_with_grunt.png" />
      
      <meta property="og:url" content="http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html" />
      <meta property="og:type" content="article" />
      <meta property="og:title" content="How I built my blog with Grunt" />
      <meta property="og:description" content="In the beginning it was WordPress. But then I wanted something more personal,
so I ended up building the whole blog from scratch with the help
of Grunt." />
      <meta property="og:image" content="http://guido-barbaglia.blog/src/images/how_i_built_my_blog_with_grunt.png" />

      <link rel="shortcut icon" href="../src/icons/favicon.ico">
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">
        <link href="../src/css/guido-barbaglia.css" rel="stylesheet">

      <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
      <script src="https://cdn.rawgit.com/showdownjs/showdown/1.5.1/dist/showdown.min.js"></script>

      <script>
        function enhance() {
            const pres = $('pre');
            for (var idx of Array(pres.length).keys()) { hljs.highlightBlock(pres.get(idx)) }
            $('table').addClass('table table-striped table-bordered table-condensed table-hover');
            $('a').addClass('keyword');
        }
      </script>
    </head>

    <body onload="enhance();">
      <br class="hidden-xs hidden-sm">
      <br class="hidden-xs hidden-sm">
      <div class="container">
        <hr>
        <h4 class="text-center">
          <a href="../">Home</a>
        </h4>
        <hr>
        <br>

        <div class='row'>
          <div class='col-lg-4 hidden-xs hidden-sm hidden-md hidden-print'>
            <img  src='../src/images/how_i_built_my_blog_with_grunt.png'
                  class='img-responsive img-circle center-block'
                  style="border: 1px solid #000;" >
            <br>
          </div>
          <div class='col-lg-8'>
            <div class='row'>
              <div class='col-lg-11'>
                <div class='summary'>
                  <p>In the beginning it was WordPress. But then I wanted something more personal,
so I ended up building the whole blog from scratch with the help
of <a href="http://gruntjs.com/">Grunt</a>.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr>
        <div class='row'>
          <div class='col-lg-12'>
            <article>
                <h1 id="howibuiltmyblogwithgrunt">How I built my blog with Grunt</h1>
<p><hr>
<br></p>
<p>Most of the contents of this blog used to live in <a href="https://kalimadev.wordpress.com/">WordPress</a>,
and it was all good. But after a while I started noticing small things.
For example, the analytics is very minimal. Or the editor is quite slow,
with a very poor support for syntax highlighting (<em>well, basically none</em>).
And these are all things that I know how to fix! So I decided to move the
blog somewhere else, and implement all the things as I like them to be!
I am a developer after all, right? ðŸ˜Ž</p>
<h1 id="customdns">Custom DNS</h1>
<p>First thing first, I want my name on it! At the time they just started
selling the new <code>.blog</code> domains, and I got mine at a very affordable price.
That was easy.</p>
<h1 id="ithastobefree">It has to be free!</h1>
<p>The DNS was cheap enough, but what about the hosting? A blog is just a bounce
of static contents, how much would it cost me? Well, if you host the whole thing
on GitHub it's all free! Perfect!</p>
<p>But, how do I connect my domain name with my repository? My first solution was
to use the <a href="https://it.godaddy.com/">GoDaddy</a>'s redirect feature with
masking, but... Well, they just take your content and put it in a giant
<code>&lt;frameset&gt;</code>... Bad GoDaddy!</p>
<p>So, read the documentation! OK, on the GitHub side, I just had to create a
file named <code>CNAME</code> in the root of my project and put my domain name in it, as
simple as:</p>
<pre><code>guido-barbaglia.blog
</code></pre>
<p><br></p>
<p>On the GoDaddy side (<em>Manage DNS, or something similar</em>), I had to remove
the default <code>A</code> and <code>CNAME</code> records and add the GitHub ones:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>@</td>
<td>192.30.252.153</td>
</tr>
<tr>
<td>A</td>
<td>@</td>
<td>192.30.252.154</td>
</tr>
<tr>
<td>CNAME</td>
<td>www</td>
<td>kalimaha.github.io</td>
</tr>
</tbody>
</table>
<h1 id="mobilefirst">Mobile first</h1>
<p>You have probably realized that I am not a designer by now...
But I want to have a decent looking blog, and it has to be readable on desktop,
tablet, mobile and everything else. How can I achieve all of this with the
minimum effort?</p>
<p>I usually rely on <a href="http://getbootstrap.com/">Bootstrap</a>, which allows me to
focus on the business logic of my front-end stuff withouth worring much about
the look and feel. I just need to use Bootstrap's classes and its nice grid
system, and everything looks decent enough. What is more, it looks nice at
every screen size, and I don't have to do anything.</p>
<p>Hooray! ðŸŽ‰</p>
<h1 id="markdownplease">Markdown, please!</h1>
<p>One of the reasons why I "left" WordPress was the editor. The WYSIWYG is slow,
and the code editing is not nice enough. The biggest pain was the syntax
highlighting, unsopported, which forced me to write my code in
<a href="https://gist.github.com">Gist</a> and embed the relative script into the post. Not
so nice.</p>
<p>On the other hand, there is a solution that I use every day to document my code,
a solution that also let me write code snippets with no struggle at all: markdown!</p>
<p>My plan is simple: I write my post with the markdown syntax, and then something
translates it into HTML. That something is the
<a href="https://github.com/showdownjs/showdown">ShowdownJS</a>, which work nicely both in
NodeJS and in the browser.</p>
<p>The only thing that's missing in such library is the syntax highlighting, so I
just added <a href="https://www.npmjs.com/package/highlight">Hihghlight</a>, which
automagically detects the language of the snippets and applies the correct
color scheme.</p>
<h1 id="besocial">Be social</h1>
<p>Hopefully people will read my posts, and maybe someone will find such posts
worth sharing with others on the major social networks. I then needed to provide
a nice set of share buttons at the end of every article. I first tried some
JavaScript library, but nothing was quite right. I then realized that it's not
rocket science, I just need some nice looking icons that point to the right
links. The icon set is provided by the awesome
<a href="http://fontawesome.io/">FontAwesome</a>, and creating the links was as easy as
Googling it:</p>
<pre><code>&lt;div&gt;
  &lt;a href="https://twitter.com/intent/tweet?text={{title}}&amp;url={{url}}"&gt;
    &lt;i class="fa fa-twitter fa-2x"&gt;&lt;/i&gt;
  &lt;/a&gt;
  &lt;a href="http://www.linkedin.com/shareArticle?mini=true&amp;url={{url}}&amp;title={{title}}"&gt;
    &lt;i class="fa fa-linkedin fa-2x"&gt;&lt;/i&gt;
  &lt;/a&gt;
  &lt;a href="http://www.reddit.com/submit?url={{url}}&amp;title={{title}}"&gt;
    &lt;i class="fa fa-reddit fa-2x"&gt;&lt;/i&gt;
  &lt;/a&gt;
  &lt;a href="http://www.facebook.com/sharer/sharer.php?u={{url}}&amp;title={{title}}"&gt;
    &lt;i class="fa fa-facebook fa-2x"&gt;&lt;/i&gt;
  &lt;/a&gt;
  &lt;a href="https://plus.google.com/share?url={{url}}"&gt;
    &lt;i class="fa fa-google-plus fa-2x"&gt;&lt;/i&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p><br></p>
<h1 id="feedback">Feedback</h1>
<p>As we seen before, my users are super interested in my posts and they share them
all over the internet. But, what if they want to discuss my super interesting
solutions with me? To provide such opportunity to my beloved readers, I've
added <a href="https://disqus.com/">Disqus</a>, an online community that is widely used
for comments on blogs and websites.
<a href="https://en.wikipedia.org/wiki/Speak_to_Me">Speak to me</a> mates!</p>
<h1 id="structureddata">Structured data</h1>
<p><a href="https://en.wikipedia.org/wiki/If_a_tree_falls_in_a_forest">If a tree falls in a forest and no one is around to hear it, does it make a
sound?</a>
We agreed that my contents are incredibly interesting, but how do you
find them? Well, through Google right?</p>
<p>Apparently, Google understands a particular JSON dialect, namely
<a href="https://developers.google.com/schemas/formats/json-ld">JSON-LD</a>, that is used
to describe the content of your page. There are several templates that can be
used for different types of contents: articles, recipes, and so forth. Such
JSON can be anywhere in the page, embedded in a <code>script</code> tag. The JSON-LD I am
using for my articles looks like that:</p>
<pre><code>&lt;script type="application/ld+json"&gt;
  {
    "@context":"http://schema.org",
    "@type":"BlogPosting",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html"
    },
    "headline":"How I built my blog with Grunt",
    "description":"In the beginning it was WordPress. But then I wanted something more personal, so I ended up building the whole blog from scratch with the help of Grunt.",
    "author": {
        "@type": "Person",
        "name": "Guido Barbaglia"
    },
    "datePublished": "2016-12-08T10:42:48.917Z",
    "dateModified": "2016-12-08T10:42:48.917Z",
    "publisher": {
      "@type": "Organization",
      "name": "Guido Barbaglia",
      "logo": {
        "@type": "ImageObject",
        "url": "http://guido-barbaglia.blog/src/images/portrait.jpg",
        "width": "150",
        "height": 60
      }
    },
    "image": {
      "@type": "ImageObject",
      "url": "http://guido-barbaglia.blog/src/images/how_i_built_my_blog_with_grunt.png",
      "height": 150,
      "width": "150"
    }
  }
&lt;/script&gt;
</code></pre>
<h1 id="puttingalltogetherwithgrunt">Putting all together with Grunt</h1>
<p>At this point I have all the pieces sorted out, but how do I put them together?
The first solution I have implemented was a blueprint HTML page with a little
JavaScript function invoked in the <code>onload</code> which loaded and populated an
<a href="http://handlebarsjs.com/">Handlebars</a>. The problem of this solution is that
your content is not immediately available to your readers, and to Google
crawlers. Basically I had a blog full of empty pages. ðŸ¤”</p>
<p>The current solution uses <a href="http://gruntjs.com/">Grunt</a> to pre-process my
markdown files and produce nice HTML files that are immediately available for
the readers (<em>and Google!</em>). The Grunt task I use is dead simple. The first
step harvests a given directory to fetch all the content (<em>markdown</em>) files:</p>
<pre><code>const get_filenames = (grunt) =&gt; {
  var filenames = [];

  grunt.file.recurse('./src/contents', function(a, b, c, filename) {
    filenames.push(filename)
  });

  return filenames
};
</code></pre>
<p><br></p>
<p>Then, for each file, Grunt:</p>
<ul>
<li>loads the markdown file</li>
<li>converts it into HTML</li>
<li>highlight the code snippets</li>
<li>load the Handlebars template</li>
<li>injects the content</li>
<li>creates and inject the JSON-LD</li>
<li>write the HTML file</li>
</ul>
<p>So basically, all I have to do is to write my posts using the markdown syntax
and then run one single command:</p>
<pre><code>grunt
</code></pre>
<p><br></p>
<p>I then push all the changes to my GitHub repository and my blog is online.
Mission accomplished! ðŸ˜Ž</p>
            </article>
          </div>
        </div>
        <br>
        <hr>
        <div class="row">
          <div class="col-lg-12 text-center">
              <a id="twitter" class="keyword" target="_blank" title="Share it on Twitter" href="https://twitter.com/intent/tweet?text=How I built my blog with Grunt&url=http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html">
                  <i class="fa fa-twitter fa-2x"></i></a>
              &nbsp;
              <a id="linkedin" class="keyword" target="_blank" title="Share it on LinkedIn" href="http://www.linkedin.com/shareArticle?mini=true&url=http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html&title=How I built my blog with Grunt">
                  <i class="fa fa-linkedin fa-2x"></i></a>
              &nbsp;
              <a id="reddit" class="keyword" target="_blank" title="Share it on Reddit" href="http://www.reddit.com/submit?url=http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html&title=How I built my blog with Grunt">
                  <i class="fa fa-reddit fa-2x"></i></a>
              &nbsp;
              <a id="facebook" class="keyword" target="_blank" title="Share it on Facebook" href="http://www.facebook.com/sharer/sharer.php?u=http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html&title=How I built my blog with Grunt">
                  <i class="fa fa-facebook fa-2x"></i></a>
              &nbsp;
              <a id="google-plus" class="keyword" target="_blank" title="Share it on Google+" href="https://plus.google.com/share?url=http://guido-barbaglia.blog/posts/how_i_built_my_blog_with_grunt.html">
                  <i class="fa fa-google-plus fa-2x"></i></a>
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-lg-12">
            <div id="disqus_thread"></div>
            <script>
                (function() {
                    var d = document, s = d.createElement('script');
                    s.src = '//guido-barbaglia.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
          </div>
        </div>
        <hr>
        <script src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=03df545c-279d-4a52-a4e4-f6e790dd0f1c&storeId=guidobarbagli-20"></script>
        <hr>
        <p class="text-center">
          &copy; 2016 Guido Barbaglia
        </p>
        <hr>
      </div>
      <div id="imports"></div>
      <br class="hidden-xs hidden-sm">
      <br class="hidden-xs hidden-sm">
    </body>
</html>
